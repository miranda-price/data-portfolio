<!DOCTYPE html>
<html lang="en">
<head>
  <title>Miranda Price - Projects</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="override.css">
</head>

<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Miranda Price</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link" href="#">Home</a>
                </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Projects</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Resume</a>
              </li>
          </div>
        </div>
      </nav>
</header>

<div class="container">
<h1>Projects</h1>
<body>
<div class="row">
    <div class="col-md-3 column" id="filters">
        <h3>Filters</h3>
        <div id="checked-filter-buttons" class="d-flex flex-wrap">
        </div>
        <hr id="filter-divider">
        <div id="unchecked-filter-buttons" class="d-flex flex-wrap">
            <button type="button" class="btn btn-secondary project-filter" id="python-filter">Python</button>
            <button type="button" class="btn btn-secondary project-filter" id="sql-filter">SQL</button>
            <button type="button" class="btn btn-secondary project-filter" id="powerbi-filter">Power BI</button>
            <button type="button" class="btn btn-secondary project-filter" id="tableau-filter">Tableau</button>
            <button type="button" class="btn btn-secondary project-filter" id="r-filter">R</button>
            <button type="button" class="btn btn-secondary project-filter" id="excel-filter">Excel</button>
            <button type="button" class="btn btn-secondary project-filter" id="pandas-filter">Pandas</button>
        </div>
    </div>
    <div class="col-md-9 column" id="projects">   
    <div class="card projects-card sql-project powerbi-project">
        <img src="" class="card-img-top" alt="">
        <div class="card-body">
                <div class="d-flex justify-content-between"><h3 class="card-title">Telecom Customer Churn</h3><h4>SQL, PowerBI, Figma</h4></div>
                <p class="card-text">Churn analysis for a fictional California telecom company to determine how many customers are leaving the company, what kind of customers are leaving, and why</p>
                <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#telecom-churn-modal">
                    Read more
                </button>
            </div>
        </div>
    
        <div class="modal fade modal-xl" id="telecom-churn-modal" tabindex="-1" aria-labelledby=" Project Writeup" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLabel">Telecom Customer Churn</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Tools: PostgreSQL, Power BI, Figma</strong></p>
                    <p><strong>Datasets:</strong> </p>
                    <ul>
                    <li>telecom_customer_churn.csv (38 fields, 7043 observations)</li>
                    <li>telecom_zipcode_population.csv (2 fields, 1671 observations)</li>
                    </ul>
                    <p><em>Datasets sourced from Maven Analytics</em></p>
                    <h2 id="telecom-customer-churn-variables-">Telecom Customer Churn Variables:</h2>
                    <ul>
                    <li>CustomerID</li>
                    <li>Gender</li>
                    <li>Age</li>
                    <li>Married</li>
                    <li>Number of dependents</li>
                    <li>City</li>
                    <li>Zipcode</li>
                    <li>Latitude</li>
                    <li>Longitude</li>
                    <li>Number of referrals</li>
                    <li>Tenure in months</li>
                    <li>Offer (A, B, C, D, E, None)</li>
                    <li>Phone service</li>
                    <li>Avg monthly long distance charges</li>
                    <li>Multiple lines</li>
                    <li>Internet service</li>
                    <li>Internet type (DSL,Fiber Optic, Cable)</li>
                    <li>Avg monthly GB download</li>
                    <li>Online security</li>
                    <li>Online backup</li>
                    <li>Device protection plan</li>
                    <li>Premium tech support</li>
                    <li>Streaming TV</li>
                    <li>Streaming movies</li>
                    <li>Streaming music</li>
                    <li>Unlimited data</li>
                    <li>Contract (Month-to-Month, One Year, Two Years)</li>
                    <li>Paperless billing</li>
                    <li>Payment method (Bank Withdrawal, Credit Card, Mailed Check)</li>
                    <li>Monthly charge</li>
                    <li>Total charges</li>
                    <li>Total refunds</li>
                    <li>Total extra data charges</li>
                    <li>Total long distance charges</li>
                    <li>Total revenue</li>
                    <li>Customer status (Churned, Stayed, Joined)</li>
                    <li>Churn category (Attitude, Competitor, Dissatisfaction, Other, Price)</li>
                    <li>Churn reason (directly related to churn category)</li>
                    </ul>
                    <h2 id="zipcode-population-variables">Zipcode Population Variables</h2>
                    <ul>
                    <li>Zipcode</li>
                    <li>Population</li>
                    </ul>
                    <h2 id="data-preparation">Data Preparation</h2>
                    <h3 id="table-creation">Table Creation</h3>
                    <pre><code><span class="hljs-comment">-- create zipcode population table --</span>
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> zipcodes (
                        zipcode <span class="hljs-built_in">INT</span>, 
                        population <span class="hljs-built_in">INT</span>
                    );
                    \copy zipcodes FROM 'filepath/telecom_zipcode_population.csv' DELIMITER ',' CSV HEADER
                    
                    <span class="hljs-comment">-- create types for customer variables --</span>
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> genders <span class="hljs-keyword">as</span> ENUM(<span class="hljs-string">'Male'</span>, <span class="hljs-string">'Female'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> yes_no <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'Yes'</span>, <span class="hljs-string">'No'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> offers <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'None'</span>, <span class="hljs-string">'Offer A'</span>, <span class="hljs-string">'Offer B'</span>, <span class="hljs-string">'Offer C'</span>, <span class="hljs-string">'Offer D'</span>, <span class="hljs-string">'Offer E'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> internet_types <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'DSL'</span>, <span class="hljs-string">'Fiber Optic'</span>, <span class="hljs-string">'Cable'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> contracts <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'Month-to-Month'</span>, <span class="hljs-string">'One Year'</span>, <span class="hljs-string">'Two Year'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> payments <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'Bank Withdrawal'</span>, <span class="hljs-string">'Credit Card'</span>, <span class="hljs-string">'Mailed Check'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> customer_statuses <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'Churned'</span>, <span class="hljs-string">'Stayed'</span>, <span class="hljs-string">'Joined'</span>);
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> churn_categories <span class="hljs-keyword">AS</span> ENUM(<span class="hljs-string">'Attitude'</span>, <span class="hljs-string">'Competitor'</span>, <span class="hljs-string">'Dissatisfaction'</span>, <span class="hljs-string">'Other'</span>, <span class="hljs-string">'Price'</span>);
                    
                    <span class="hljs-comment">-- create customer churn table --</span>
                    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> customers (
                        customer_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">UNIQUE</span>,
                        gender genders,
                        age <span class="hljs-built_in">SMALLINT</span>,
                        married yes_no,
                        number_of_dependents <span class="hljs-built_in">SMALLINT</span>,
                        city <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">75</span>),
                        zipcode <span class="hljs-built_in">INT</span>,
                        latitude <span class="hljs-keyword">DOUBLE</span> <span class="hljs-keyword">PRECISION</span>,
                        longitude <span class="hljs-keyword">DOUBLE</span> <span class="hljs-keyword">PRECISION</span>,
                        number_of_referrals <span class="hljs-built_in">SMALLINT</span>,
                        tenure_in_months <span class="hljs-built_in">SMALLINT</span>,
                        offer offers,
                        phone_service yes_no,
                        avg_monthly_long_distance_charges <span class="hljs-built_in">FLOAT</span>,
                        multiple_lines yes_no,
                        internet_service yes_no,
                        internet_type internet_types,
                        avg_monthly_gb_download <span class="hljs-built_in">SMALLINT</span>,
                        online_security yes_no,
                        online_backup yes_no,
                        device_protection_plan yes_no,
                        premium_tech_support yes_no,
                        streaming_tv yes_no,
                        streaming_movies yes_no,
                        streaming_music yes_no,
                        unlimited_data yes_no,
                        contract contracts,
                        paperless_billing yes_no,
                        payment_method payments,
                        monthly_charge <span class="hljs-built_in">FLOAT</span>,
                        total_charges <span class="hljs-built_in">FLOAT</span>,
                        total_refunds <span class="hljs-built_in">FLOAT</span>,
                        total_extra_data_charges <span class="hljs-built_in">SMALLINT</span>,
                        total_long_distance_charges <span class="hljs-built_in">FLOAT</span>,
                        total_revenue <span class="hljs-built_in">FLOAT</span>,
                        customer_status customer_statuses,
                        churn_category churn_categories,
                        churn_reason <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">250</span>)
                    );
                    \copy customers (customer_id, gender, age, married, number_of_dependents, city, zipcode, latitude, longitude, number_of_referrals, tenure_in_months, offer, phone_service, avg_monthly_long_distance_charges, multiple_lines, internet_service, internet_type, avg_monthly_gb_download, online_security, online_backup, device_protection_plan, premium_tech_support, streaming_tv, streaming_movies, streaming_music, unlimited_data, contract, paperless_billing, payment_method, monthly_charge, total_charges, total_refunds, total_extra_data_charges, total_long_distance_charges, total_revenue, customer_status, churn_category, churn_reason) FROM 'filepath/telecom_customer_churn.csv' DELIMITER ',' CSV HEADER
                    </code></pre><h3 id="data-cleaning">Data Cleaning</h3>
                    <p>The main concern for data cleaning for this churn analysis are duplicate customer IDs and missing zipcodes in the customer tables that would interfere with joins.</p>
                    <pre><code><span class="hljs-keyword">SELECT</span> customer_id
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> customer_id
                    <span class="hljs-keyword">HAVING</span> <span class="hljs-keyword">COUNT</span>(customer_id) &gt; <span class="hljs-number">1</span>;
                    
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> customer_id) <span class="hljs-keyword">AS</span> total_customers
                    <span class="hljs-keyword">FROM</span> customers;
                    </code></pre><p>There are 0 customer ID duplicates in the customers table and 7043 unique customer IDs.</p>
                    <pre><code><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> customer_id) <span class="hljs-keyword">AS</span> null_zip_count
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> zipcode <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>;
                    </code></pre><p>There are zero null values for zipcode in the customers table, which is ideal for joining with the population table.</p>
                    <p><strong>There are no significant issues with the data that was given.</strong></p>
                    <h2 id="exploratory-data-analysis">Exploratory Data Analysis</h2>
                    <h3 id="populations-by-zip-code">Populations by Zip Code</h3>
                    <pre><code><span class="hljs-comment">-- population summary statistics --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">AVG</span>(population), <span class="hljs-number">1</span>) <span class="hljs-keyword">AS</span> avg_pop, 
                        <span class="hljs-keyword">MIN</span>(population) <span class="hljs-keyword">AS</span> min_pop,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population) <span class="hljs-keyword">AS</span> pop_q1,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.50</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population) <span class="hljs-keyword">AS</span> pop_q2,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> population) <span class="hljs-keyword">AS</span> pop_q3,
                        <span class="hljs-keyword">MAX</span>(population) <span class="hljs-keyword">AS</span> max_pop
                    <span class="hljs-keyword">FROM</span> zipcodes;
                    </code></pre><p>California has an average population of 20276.4 people, by zip code.  The median population is 14239, and the first and third quartiles are 1789 and 32942.5 respectively.  The smallest population by zip code is 11 people and the largest is 105285 people.</p>
                    <h3 id="customer-demographics">Customer Demographics</h3>
                    <pre><code><span class="hljs-comment">-- age summary stats --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">AVG</span>(age), <span class="hljs-number">1</span>) <span class="hljs-keyword">AS</span> avg_age, <span class="hljs-keyword">MIN</span>(age) <span class="hljs-keyword">AS</span> min_age, <span class="hljs-keyword">MAX</span>(age) <span class="hljs-keyword">AS</span> max_age
                    <span class="hljs-keyword">FROM</span> customers;
                    
                    <span class="hljs-comment">-- gender --</span>
                    <span class="hljs-keyword">SELECT</span> gender, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customers_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> gender;
                    
                    <span class="hljs-comment">-- married or unmarried --</span>
                    <span class="hljs-keyword">SELECT</span> married, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customers_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> married;
                    
                    <span class="hljs-comment">-- number of dependents --</span>
                    <span class="hljs-keyword">SELECT</span> number_of_dependents, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customers_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    </code></pre><p>The average age of customers is 46.5 with a range of 19 to 80.  The ratio of men to women is roughly 1:1.  48% of customers are married.  76% percent of customers have no dependents. 7% of customers have one dependent, 7% have two, and 7% have three.  There are a handful of customers for each number of dependents up to nine dependents.</p>
                    <h3 id="services-and-contracts">Services and Contracts</h3>
                    <pre><code><span class="hljs-comment">-- contract types --</span>
                    <span class="hljs-keyword">SELECT</span> contract, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7043</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> contract
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    
                    <span class="hljs-comment">-- offers --</span>
                    <span class="hljs-keyword">SELECT</span> offer,
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count,
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7043</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> offer
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    </code></pre><p>Half of customers are contracted on a month-to-month basis.  26% have a two year contract and 22% have a one year contract (the rest of the customers were missing a value for the contract variable).</p>
                    <p>55% of customers have no offer.  The most common offers are offer B and offer E, with 11% of customers for each.  Offer D has 8%, offer A has 7%, and Offer C is the least common with only 5%.</p>
                    <pre><code><span class="hljs-comment">-- phone --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> phone_service_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> phone_service = <span class="hljs-string">'Yes'</span>;
                    
                    <span class="hljs-comment">-- internet --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> internet_service_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> internet_service = <span class="hljs-string">'Yes'</span>;
                    
                    <span class="hljs-comment">-- premium tech support --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> tech_support_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> premium_tech_support = <span class="hljs-string">'Yes'</span>;
                    
                    <span class="hljs-comment">-- online security --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> online_security_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> online_security = <span class="hljs-string">'Yes'</span>;
                    
                    <span class="hljs-comment">-- online backup --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> online_backup_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> online_backup = <span class="hljs-string">'Yes'</span>;
                    
                    <span class="hljs-comment">-- streaming --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">100</span> - <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7034</span>) <span class="hljs-keyword">AS</span> streaming_percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> streaming_tv = <span class="hljs-string">'No'</span> 
                        <span class="hljs-keyword">AND</span> streaming_movies = <span class="hljs-string">'No'</span> 
                        <span class="hljs-keyword">AND</span> streaming_music = <span class="hljs-string">'No'</span>;
                    </code></pre><p>The most common service is phone service, with 90% of all customers subscribed.  The next most popular services are internet and some form of streaming with 78% and 73% respectively.  Online security, online backup, and tech support were much less popular, ranging from 28% to 34% of customers.</p>
                    <h3 id="churn-rate-and-lost-revenue">Churn Rate and Lost Revenue</h3>
                    <h4 id="customer-status-and-total-revenue">Customer Status and Total Revenue</h4>
                    <pre><code><span class="hljs-comment">-- customer status --</span>
                    <span class="hljs-keyword">SELECT</span> customer_status, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customers_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">7043</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> customer_status;
                    
                    <span class="hljs-comment">-- total revenue --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">SUM</span>(total_revenue)) <span class="hljs-keyword">AS</span> total_revenue
                    <span class="hljs-keyword">FROM</span> customers;
                    
                    <span class="hljs-comment">-- total revenue by customer status --</span>
                    <span class="hljs-keyword">SELECT</span> customer_status, 
                        <span class="hljs-keyword">SUM</span>(total_revenue) <span class="hljs-keyword">AS</span> revenue, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>* <span class="hljs-keyword">SUM</span>(total_revenue)/<span class="hljs-number">21371132</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> customer_status;
                    </code></pre><p>1869 total customers were churned, accounting for 26% of customers.  67% of customers stayed, and 6% were new customers.</p>
                    <p>Out of the $21,371,132 in total revenue, $3,684,459.82 (17%) of revenue was from churned customers.  83% of the revenue was from customers that stayed.  Customers that just joined unsurprisingly did not contribute much to the total revenue, only $54,279.75.</p>
                    <h4 id="churn-categories-and-reasons">Churn Categories and Reasons</h4>
                    <pre><code><span class="hljs-comment">-- churn category --</span>
                    <span class="hljs-keyword">SELECT</span> churn_category, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    
                    <span class="hljs-comment">-- most common churn reasons --</span>
                    <span class="hljs-keyword">SELECT</span> churn_category, churn_reason, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span> <span class="hljs-keyword">AND</span> churn_reason <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>, <span class="hljs-number">2</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> customer_count <span class="hljs-keyword">DESC</span>
                    <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">5</span>;
                    </code></pre><p>44% of customers were churned because of a competitor, the most common category.  Another 17% were lost because of dissatisfaction, 16% because of attitude, 11% because of price, and 9% because of a different reason.</p>
                    <p>The five most common specific reasons for leaving were:</p>
                    <ol>
                    <li>The competitor had a better devices</li>
                    <li>The competitor had a better offer</li>
                    <li>The attitude of a support person</li>
                    <li>Other/don&#39;t know</li>
                    <li>Competitor offered more data </li>
                    </ol>
                    <h4 id="how-many-of-the-churned-customers-were-high-value-customers-">How many of the churned customers were high-value customers?</h4>
                    <pre><code><span class="hljs-comment">-- calculate revenue quartiles --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_revenue) <span class="hljs-keyword">AS</span> rev_q1, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.50</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_revenue) <span class="hljs-keyword">AS</span> rev_q2,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_revenue) <span class="hljs-keyword">AS</span> rev_q3
                    <span class="hljs-keyword">FROM</span> customers;
                    
                    <span class="hljs-comment">-- group churned customers by revenue quartile --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CASE</span>
                        <span class="hljs-keyword">WHEN</span> total_revenue &lt; <span class="hljs-number">605.61</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q1'</span>
                        <span class="hljs-keyword">WHEN</span> total_revenue &lt; <span class="hljs-number">2108.64</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q2'</span>
                        <span class="hljs-keyword">WHEN</span> total_revenue &lt; <span class="hljs-number">4801.145</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q3'</span>
                    <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'q4'</span>
                    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> rev_quartile,
                    <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count,
                    <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    </code></pre><p>Over a third of churned customers were in the lowest total revenue quartile and a fourth were in the second lowest quartile.  This may mean that churned customers were not very profitable customers, or the lower total revenue could be due to a difference in typical tenure for churned and non-churned customers.</p>
                    <pre><code><span class="hljs-comment">-- tenure summary stats for churned customers --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">AVG</span>(tenure_in_months)) <span class="hljs-keyword">AS</span> avg_tenure, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> q1,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.5</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">median</span>, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> q3
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>;
                    
                    <span class="hljs-comment">-- tenure summary stats for non-churned customers --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">AVG</span>(tenure_in_months)) <span class="hljs-keyword">AS</span> avg_tenure, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> q1,
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.5</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">median</span>, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tenure_in_months) <span class="hljs-keyword">AS</span> q3
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Stayed'</span>;
                    </code></pre><p>Churned customers have an average tenure of 18 months and a median of 10 months, compared to the 38 month average and median of remaining customers.  The middle 50% of churned customers had a tenure between 2 and 29 months, while the middle 50% of remaining customers have a tenure between 15 and 61 months.  Churned customers generally have much shorter tenures, which could be a factor in the lower total revenues.  </p>
                    <p>High and low-value customers should be determined by monthly charges instead so the difference in tenure between groups will not skew the results.</p>
                    <pre><code><span class="hljs-comment">-- calculate monthly charges quartiles --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.25</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> monthly_charge) <span class="hljs-keyword">AS</span> chrg_q1, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.50</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> monthly_charge) <span class="hljs-keyword">AS</span> chrg_q2, 
                        <span class="hljs-keyword">PERCENTILE_CONT</span>(<span class="hljs-number">0.75</span>) <span class="hljs-keyword">WITHIN</span> <span class="hljs-keyword">GROUP</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> monthly_charge) <span class="hljs-keyword">AS</span> chrg_q3
                    <span class="hljs-keyword">FROM</span> customers;
                    
                    <span class="hljs-comment">-- group churned customers by monthly charges quartile --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CASE</span>
                        <span class="hljs-keyword">WHEN</span> monthly_charge &lt; <span class="hljs-number">30.4</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q1'</span>
                        <span class="hljs-keyword">WHEN</span> monthly_charge &lt; <span class="hljs-number">70.05</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q2'</span>
                        <span class="hljs-keyword">WHEN</span> monthly_charge &lt; <span class="hljs-number">89.75</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q3'</span>
                    <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'q4'</span>
                    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> chrg_quartile,
                    <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count,
                    <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    </code></pre><p>66% of churned customers were in the top half of monthly charges, and only 10% were in the bottom quartile.  Churned customers appear to generally be high-value customers based on monthly earnings, meaning that the company is losing out on a lot of future earnings by not retaining these customers.</p>
                    <h2 id="ideal-churn-profile">Ideal Churn Profile</h2>
                    <h3 id="churned-customer-demographics">Churned Customer Demographics</h3>
                    <pre><code><span class="hljs-comment">-- cities with the most churned customers --</span>
                    <span class="hljs-keyword">SELECT</span> city, <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>
                    <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">5</span>;
                    
                    <span class="hljs-comment">-- number of churned customers in cities grouped by population quartile --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CASE</span>
                        <span class="hljs-keyword">WHEN</span> population &lt; <span class="hljs-number">1789</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q1'</span>
                        <span class="hljs-keyword">WHEN</span> population &lt; <span class="hljs-number">14239</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q2'</span>
                        <span class="hljs-keyword">WHEN</span> population &lt; <span class="hljs-number">32942.5</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'q3'</span>
                    <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'q4'</span>
                    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> pop_quartile,
                    <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count
                    <span class="hljs-keyword">FROM</span> customers <span class="hljs-keyword">AS</span> c
                    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> zipcodes <span class="hljs-keyword">AS</span> z
                    <span class="hljs-keyword">ON</span> c.zipcode = z.zipcode
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    </code></pre><p>The five cities with the most churned customers were:</p>
                    <ol>
                    <li>San Diego - 185 customers</li>
                    <li>Los Angeles - 78 customers</li>
                    <li>San Francisco - 31 customers</li>
                    <li>San Jose - 29 customers</li>
                    <li>Sacramento - 26 customers</li>
                    </ol>
                    <p>These are all more populous cities in California.  Using the population quartiles calculated in the exploratory data analysis step, it is clear that bigger cities unsurprisingly have more churned customers.  The lowest quartile had 380 churned customer, the second lowest had 406, the second highest had 459, and the highest had 624.  Given this relationship between city size and churn, it is not clear if city has an unusual impact on customer churn rate.</p>
                    <pre><code><span class="hljs-comment">-- age group --</span>
                    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CASE</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'19 and under'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">30</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'20s'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">40</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'30s'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">50</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'40s'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">60</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'50s'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">70</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'60s'</span>
                        <span class="hljs-keyword">WHEN</span> age &lt; <span class="hljs-number">80</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'70s'</span>
                    <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'80 and up'</span>
                    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> age_group,
                    <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                    <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    
                    <span class="hljs-comment">-- gender --</span>
                    <span class="hljs-keyword">SELECT</span> gender, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    
                    <span class="hljs-comment">-- married or unmarried --</span>
                    <span class="hljs-keyword">SELECT</span> married, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    
                    <span class="hljs-comment">-- number of dependents --</span>
                    <span class="hljs-keyword">SELECT</span> number_of_dependents, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;]
                    </code></pre><p>For the age ranges, there are very few churned customers under 20 years old or above 80 years old.  The other decades are fairly consistent (around 16%) with a slight peak for the 40s with 17%.</p>
                    <p>Gender does not seem to be much of a factor for churn rate.  939 churned customers were women and 930 were men.</p>
                    <p>Marriage status and number of dependents are where the churned customers start to stand out from the demographics of customers as a whole.  35% of churned customers were married compared to 48% of all customers.  94% of churned customers had no dependents, 1% had one dependent, 1% had two, and 1% had three compared to 76%, 7%, 7%, and 7% for customers in general.</p>
                    <h3 id="churned-customer-services-and-contracts">Churned Customer Services and Contracts</h3>
                    <pre><code><span class="hljs-comment">-- contract type --</span>
                    <span class="hljs-keyword">SELECT</span> contract, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    
                    <span class="hljs-comment">-- offer --</span>
                    <span class="hljs-keyword">SELECT</span> offer, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    </code></pre><p>Churned customers generally had shorter contracts than other customers.  The majority of churn customers had a month-to month contract (88%).  8% had a one year contract and only 2% had a two year contract.</p>
                    <p>56% percent of churned customers had no offers, which is close to the percent of all customers that do not have an offer.  Offer E was twice as common for churned customers than all customers, with 22% of churned customers having that offer.   Offer B was only half as common with only 5%.  8% of churned customers had offer D, 5% had offer C, and only 1% had offer A.</p>
                    <pre><code><span class="hljs-comment">-- internet service --</span>
                    <span class="hljs-keyword">SELECT</span> internet_service, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;
                    
                    <span class="hljs-comment">-- tech support --</span>
                    <span class="hljs-keyword">SELECT</span> premium_tech_support, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    
                    <span class="hljs-comment">-- online security --</span>
                    <span class="hljs-keyword">SELECT</span> online_security, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    
                    <span class="hljs-comment">-- online backup --</span>
                    <span class="hljs-keyword">SELECT</span> online_backup, 
                        <span class="hljs-keyword">COUNT</span>(customer_id) <span class="hljs-keyword">AS</span> customer_count, 
                        <span class="hljs-keyword">ROUND</span>(<span class="hljs-number">100</span>*<span class="hljs-keyword">COUNT</span>(customer_id)/<span class="hljs-number">1869</span>) <span class="hljs-keyword">AS</span> percentage
                    <span class="hljs-keyword">FROM</span> customers
                    <span class="hljs-keyword">WHERE</span> customer_status = <span class="hljs-string">'Churned'</span>
                    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
                    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
                    </code></pre><p>Churned customers are more likely to have internet service than customers in general, with 93% subscribed compared to only 78%.  However, churned customers were only half as likely to pay for either premium tech support or online security.</p>
                    <h3 id="jean-smith-the-ideal-churn-profile">Jean Smith - The Ideal Churn Profile</h3>
                    <img src="content/telecom-churn-profile.png" alt="Profile photo of a middle-aged woman next to the name Jean Smith with a lists of demographic and telecom service information below" height="350px">
                </div>
                </div>
            </div>
        </div>
    <div class="card projects-card excel-project">
        <img src="content/finance-tool-card.png" class="card-img-top" alt="An excel sheet with a table showing income, expenses, balance and running balance by month with corresponding charts to the right.">
        <div class="card-body">
          <div class="d-flex justify-content-between"><h3 class="card-title">Personal Finance Tracker</h3><h4>Excel</h4></div>
          <p class="card-text">A personal finance management tool that allows people to track monthly income and expenses in detail and analyzes financial trends over time</p>
          <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#personal-finance-tracker-modal">
            Read more
          </button>
        </div>
      </div>

      <div class="modal fade modal-xl" id="personal-finance-tracker-modal" tabindex="-1" aria-labelledby="Personal Finance Tracker Project Writeup" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title" id="exampleModalLabel">Personal Finance Tracker</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <img src="content/finance-tool-card.png" alt="An excel sheet with a table showing income, expenses, balance and running balance by month with corresponding charts to the right." width="100%">
                <p><strong>Tools: Excel</strong></p>
                <h2 id="define-the-problem">Define the Problem</h2>
                <h3 id="the-problem-">The Problem:</h3>
                <p>People need a way to track their income and expenses in order to make good financial decisions.</p>
                <h3 id="the-solution-">The Solution:</h3>
                <p>A personal finance tracker that features:</p>
                <ul>
                <li>A way to log income and expenses by category for each month</li>
                <li>Comparisons between expected and actual income/expenses</li>
                <li>An analysis of how finances change over time</li>
                <li>Trends represented with easy to understand visualizations</li>
                </ul>
                <h2 id="monthly-budget-template">Monthly Budget Template</h2>
                <h3 id="categories">Categories</h3>
                <p>A good budget template should make distinctions between different sources of income and types of expenses to better track spending habits.  A Categories sheet was created to split finances into categories and subcategories.</p>
                <div class="d-flex">
                    <div>
                        <p>The main categories were:</p>
                        <ul>
                        <li>Income (salary, interest, etc.)</li>
                        <li>Necessities (groceries, transportation, etc.)</li>
                        <li>Occasional Expenses (restaurants, hobbies, etc.)</li>
                        <li>Recurring Payments (rent, utilities, etc.)</li>
                        <li>Insurance</li>
                        <li>Other Expenses</li>
                        </ul>
                    </div>
                    <img src="content/finance-tool-categories.png" alt="An excel table listing the different incomes/expenses for each category" width="50%">
                </div>
                <h3 id="personal-budget-overview">Personal Budget Overview</h3>
                <img src="content/finance-tool-budget-overview.png" alt="Two excel tables breaking down the predicted, actual, and difference between predicted and actual values of the subcategories of income and necessities for the month of August 2024." height="300px">
                <p>Each category has its own table that tracks the predicted amount, actual amount, and the difference between those two amounts for each subcategory.  The tables also have a row that calculates the subtotal of each measure for that particular category.  The difference column is automatically calculated, and its subtotal is highlighted green or red based on whether that category was on target or not for that month.</p>
                <h3 id="personal-budget-summary">Personal Budget Summary</h3>
                <img src="content/finance-tool-budget-summary.png" alt="Two excel tables breaking down the predicted, actual, and difference between predicted and actual values for income, expenses, and balance, as well as for the different expenses categories." height="250px">
                <p>The personal budget summary was designed to make it easy to track the money coming in and being spent for that month and give a breakdown of spending by category.  The summary also calculates the difference between the project totals and actual totals to suggest which categories need to be adjusted in the budget.  Important values like balance and the difference between expected and actual totals are colored green or red to give a good idea of the finances for the month without needing to carefully read each value.</p>
                <p>The first table of the personal budget summary compares the predicted and actual total income, total expenses, and balance, as well as the difference between the predicted and actual totals of each.  Cells in the difference row and balance column will appear green if the amount is at least $0 and red if the amount is in the negatives.</p>
                <p>The second table of the personal budget summary compares the predicted and actual totals for each category of expenses, as well as the difference between predicted and actual.  Cells in the difference column are red if in the negatives, and green if the amount is at least $0.</p>
                <h2 id="finance-trends">Finance Trends</h2>
                <h3 id="monthly-summaries">Monthly Summaries</h3>
                <img src="content/finance-tool-monthly-summaries.png" alt="An excel table with the predicted and actual values of key financial information for each month" width="100%">
                <p>Each monthly budget has a row near the bottom that represents the monthly summary.  The monthly summary can be copy and pasted into the Summaries sheet to be analyzed in the Finance Trends sheet.</p>
                <h3 id="finances-by-month">Finances by Month</h3>
                <img src="content/finance-tool-monthly-finances.png" alt="An excel table showing income, expenses, balance and running balance by month" height="150px">
                <p>The finances by month table tracks the actual income, expenses, and balance of each month.  There is also a column that shows how the running balance changes with time to track how much money has been saved or lost over a long period of time.</p>
                <h3 id="visualizations">Visualizations</h3>
                <img src="content/finance-tool-viz.png" alt="Two charts made in excel depicting finance trends over time, as described below." width="100%">
                <p>The first visualization is a stacked line graph that compares the total income and total expenses from month-to-month.</p>
                <p>The second visualization is a line graph of the running balance over the months.  The visualization also includes a trend line that forecasts the expected running total for the next two months.</p>
              </div>
            </div>
          </div>
      </div>

      <div class="card projects-card tableau-project">
        <img src="content/nyc-trees-dashboard.png" class="card-img-top" alt="tableau dashboard with visualisations of data regarding trees and income for NYC neightborhoods">
        <div class="card-body">
             <div class="d-flex justify-content-between"><h3 class="card-title">NYC Trees and Income by Neighborhood</h3><h4>Tableau</h4></div>
             <p class="card-text">A visual look at the relationship between income and the number and quality of trees in New York boroughs</p>
             <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#nyc-trees-modal">
                 Read more
             </button>
         </div>
     </div>
 
     <div class="modal fade modal-xl" id="nyc-trees-modal" tabindex="-1" aria-labelledby=" Project Writeup" aria-hidden="true">
         <div class="modal-dialog modal-dialog-scrollable">
             <div class="modal-content">
               <div class="modal-header">
                 <h3 class="modal-title" id="exampleModalLabel">NYC Trees and Income by Neighborhood</h3>
                 <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
             </div>
             <div class="modal-body">
                <img src="content/nyc-trees-dashboard.png" class="shadow" alt="tableau dashboard with visualisations of data regarding trees and income for NYC neightborhoods" width="100%">
                <p><strong>Tools:</strong> Tableau</p>
                <h2 id="define-the-problem">Define the Problem</h2>
                <p><strong>How do the number of trees and quality of trees vary by borough in NYC, and does income appear to be related?</strong></p>
                <p><strong>Datasets:</strong> </p>
                <ul>
                <li>tree-census-NYC_2015.csv  <ul>
                <li>16 fields</li>
                <li>683788 observations</li>
                </ul>
                </li>
                <li>income-NYC_2015.csv<ul>
                <li>8 fields</li>
                <li>218 observations</li>
                </ul>
                </li>
                </ul>
                <h2 id="variables">Variables</h2>
                <h3 id="tree-census-dataset">Tree Census Dataset</h3>
                <h4 id="quantitative">Quantitative</h4>
                <ul>
                <li>Tree Dbh (height of tree, in feet)</li>
                <li>Stump Diam (tree diameter, indicates age, in inches)</li>
                <li>Latitude (decimal representation)</li>
                <li>Longitude (decimal representation)</li>
                </ul>
                <h4 id="qualitative">Qualitative</h4>
                <ul>
                <li>Tree Id (six-digit number)</li>
                <li>Status (&#39;Alive&#39;, &#39;Stump&#39;, &#39;Dead&#39;)</li>
                <li>Health (&#39;Good&#39;, &#39;Fair&#39;, &#39;Poor&#39;)</li>
                <li>Spc Latin (scientific name of tree species)</li>
                <li>Spc Common (common name of tree species)</li>
                <li>Address</li>
                <li>Zipcode</li>
                <li>Borocode (1-5 corresponding to &#39;Manhattan&#39;, &#39;Bronx&#39;, &#39;Brooklyn&#39;, &#39;Queens&#39;, &#39;Staten Island&#39;)</li>
                <li>Borough (name of borough)</li>
                <li>Nta Name (name of neighborhood)</li>
                <li>State</li>
                </ul>
                <p><em>Note: F1 column is the table&#39;s primary key and was not analyzed along with the other variables</em></p>
                <h3 id="income-dataset">Income Dataset</h3>
                <h4 id="quantitative">Quantitative</h4>
                <ul>
                <li>Total Income ($)</li>
                <li>Total Income MOE (margin of error, in $)</li>
                <li>Median Income ($)</li>
                <li>Median Income MOE (margin of error, in $)</li>
                <li>Mean Income ($)</li>
                <li>Mean Income MOE (margin of error, in $)</li>
                </ul>
                <h4 id="qualitative">Qualitative</h4>
                <ul>
                <li>Geographical Id (8600000US + zip code)</li>
                <li>Zipcode</li>
                </ul>
                <h2 id="missing-data">Missing Data</h2>
                <p>A large number of observations have a stump diameter of 0 inches, regardless of health or status.  This suggests that the data is missing, so these observations will be eliminated for any analysis related to tree stump diameter to avoid skewing results.</p>
                <p>There were also several null values in the health column, which should be removed for analysis for the same reason as the stump diameter column.</p>
                <h2 id="visualize-data-relationships">Visualize Data Relationships</h2>
                <h3 id="income-by-location">Income by Location</h3>
                <img src="content/nyc-trees-income-boxplots.png" class="shadow" alt="side-by-side boxplots of income for the five New York boroughs as described below" width="100%">
                <p>We can compare the income of each borough by side-by-side box plots.</p>
                <ul>
                <li>Manhattan has the highest average income as well as the highest incomes in general.</li>
                <li>The Bronx has the lowest average income and has some of the lowest incomes along with Brooklyn.</li>
                <li>Manhattan has the greatest spread of income, while Staten Island has a narrow range and has middle 50% of its observations within a $20k range</li>
                </ul>
                <img src="content/nyc-trees-income-map.png" class="shadow" alt="heat map of average income by zip code for nyc" height="300px">
                <p>Mapping the average income of each zip code supports these observations and lets us see how much income in each borough varies by neighborhood.</p>
                <h3 id="trees-by-location">Trees by Location</h3>
                <h4 id="number-of-trees">Number of Trees</h4>
                <img src="content/nyc-trees-tree-count.png" class="shadow" alt="bar chart showing number of trees in each borough as described below" width="100%">
                <p>Based on this bar chart, Queens has the most trees and Brooklyn has the second highest number of trees.  Manhattan has the least number of trees, only a fifth of the number Queens has.  The Bronx and Staten Island both have more trees than Manhattan, but not nearly as many as Brooklyn.</p>
                <img src="content/nyc-trees-tree-map.png" class="shadow" alt="map showing the concentration of trees by zip code for nyc" height="300px">
                <p>Mapping the trees by zip code generally supports these findings, and also reveals that Staten Island has two areas with a large amount of trees and not many trees anywhere else.</p>
                <h4 id="health-of-trees">Health of Trees</h4>
                <img src="content/nyc-trees-tree-health.png" class="shadow" alt="bar chart showing the health of trees in each borough as described below" height="300px">
                <img src="content/nyc-trees-alive-dead.png" class="shadow" alt="bar chart showing number of alive versus dead trees in each borough as described below" width="100%">
                <p>Based on the bar charts above, we can make some observations:</p>
                <ul>
                <li>The majority of trees are alive and in good health in every borough</li>
                <li>The proportion of live to dead trees is fairly consistent by borough, with the exception of Staten Island having a smaller percentage of dead trees and Queens having a slightly higher percentage of dead trees</li>
                <li>Staten Island and the Bronx have very few trees in poor health</li>
                </ul>
                <img src="content/nyc-trees-stump-diam.png" class="shadow" alt="diagram showing average stump diameter of trees in each borough as described below" height="300px">
                <p>Tree age is measured by counting the rings on the stump, so tree stump diameter can be used to compare the age of trees.  Older trees would indicate healthier conditions for the trees over a long period of time.</p>
                <ul>
                <li>Queens and Brooklyn have the largest tree stumps on average, indicating that the trees there are generally older</li>
                <li>Staten Island and the Bronx have the next largest tree stumps</li>
                <li>Manhattan has the smallest tree stumps, therefore the youngest trees</li>
                </ul>
                <h3 id="trees-and-income">Trees and Income</h3>
                <img src="content/nyc-trees-scatterplot.png" class="shadow" alt="scatter plot with a line of regression showing relationship between average income and number of trees by bourough as described below" height="300px">
                <p>Creating a scatter plot of average income of a borough compared to the number of trees reveals a negative relationship.  Plotting the line of the linear regression we can see that as income increases the number of trees decreases, however, we can also see that this line only fits three of the boroughs well and that Queens and the Bronx do not fit this model.</p>
                <h2 id="outliers">Outliers</h2>
                <p>The income box plot reveals outliers on the higher end for Brooklyn, Queens and Manhattan.</p>
                <p>There is one observation in Manhattan with a value of $400K, which is $100K more than the next highest income.</p>
                <h2 id="findings-and-insights">Findings and Insights</h2>
                <p>There are tangible difference in the number of trees, and the health of trees to a lesser extent, between the different NYC boroughs.  There are also significant differences in average income and range of income for these boroughs.  </p>
                <p>However, these differences in income do not seem to the related to the difference in trees.  The borough most trees and the borough with the healthiest trees were in the mid-range of incomes and the borough with the fewest trees was the one with the highest income.  Plotting income and number of trees did not show any relationship, which was confirmed by the linear regression model only fitting three of the five boroughs.</p>
                <h3 id="future-studies">Future Studies</h3>
                <p>Further studies should examine factors besides income that may be related to the number and health of trees in NYC.  Population and area of the boroughs were not included in the datasets and could influence the number of trees more than income.</p>
             </div>
             </div>
         </div>
     </div>

      <div class="card projects-card r-project">
        <img src="content/veg-height-card.png" class="card-img-top" alt="side-by-side box plots comparing height distribution of vegetarian and non vegetarian children">
        <div class="card-body">
          <div class="d-flex justify-content-between"><h3 class="card-title">Childhood Vegetarianism and Height</h3><h4>Rstudio</h4></div>
          <p class="card-text">A statistical examination of the impact of childhood vegetarianism on growth outcomes</p>
          <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#veg-height-modal">
            Read more
          </button>
        </div>
      </div>

      <div class="modal fade modal-xl" id="veg-height-modal" tabindex="-1" aria-labelledby="Childhood Vegetarianism and Height Project Writeup" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title" id="exampleModalLabel">Childhood Vegetarianism and Height</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p><strong>Group final data analysis project completed for STAT 212: Applied Statistics</strong></p>
                <p><strong>Tools:</strong> Rstudio</p>
                <h2 id="define-the-problem">Define the Problem</h2>
                <p><strong>Is there is a relationship between being vegetarian and a student&#39;s height?</strong></p>
                <h3 id="dataset">Dataset</h3>
                <p>dap_data.csv, randomly selected subset from the Census at Schools dataset<br>62 fields, 250 observations</p>
                <h3 id="restrictions">Restrictions</h3>
                <ul>
                <li>Gender was limited to female students to avoid differences in the average height or the level of vegetarianism between male and female students affecting the findings.</li>
                <li>Age was limited to between 11 and 14 inclusive.  High school vegetarians could have become vegetarian after they were done growing so their vegetarianism would have no impact on height.  Grades 6-8 are also when many students experience growth spurts so the difference in height between the two groups would be more pronounced if vegetarianism is related to height.</li>
                </ul>
                <h2 id="variables">Variables</h2>
                <p><em>Note: There are 62 fields in the dataset but only 2 relevant fields for this study</em></p>
                <ul>
                <li>Vegetarian (&#39;Yes&#39;, &#39;No&#39;): categorical and nominal</li>
                <li>Height_cm: quantitative and continuous</li>
                </ul>
                <h2 id="missing-data">Missing Data</h2>
                <p>There are 4 observations missing a value for the vegetarian category.</p>
                <p>These observations were kept for univariate summaries of the height variable and eliminated for all other statistical analysis.</p>
                <h2 id="univariate-summaries">Univariate Summaries</h2>
                <ul>
                <li>Vegetarian<ul>
                <li>Yes: 16 observations (6.50%)</li>
                <li>No: 230 observations (93.50%)</li>
                </ul>
                </li>
                <li>Height (cm)<ul>
                <li>Mean: 156.23</li>
                <li>Standard Deviation: 10.82</li>
                <li>Median: 158</li>
                <li>Minimum: 96</li>
                <li>Maximum: 189</li>
                <li>IQR: 13</li>
                <li>1st Quartile: 150</li>
                <li>3rd Quartile: 163</li>
                </ul>
                </li>
                </ul>
                <img src="content/veg-height-histogram.png" alt="histogram showing height distribution as described in the list above">
                <pre><code># number of vegetarian and non-vegetarian students
                table(<span class="hljs-name">data</span>$Vegetarian)
                
                # sample height distribution
                sd(<span class="hljs-name">data</span>$Height_cm)
                range(<span class="hljs-name">data</span>$Height_cm)
                summary(<span class="hljs-name">data</span>$Height_cm)
                hist(<span class="hljs-name">data</span>$Height_cm,
                    xlab='Height (<span class="hljs-name">cm</span>)', ylab='Number of students',
                    main='Histogram of Students\' Height')
                abline(<span class="hljs-name">v=mean</span>(<span class="hljs-name">data</span>$Height_cm), col='red')
                </code></pre><h3 id="outliers">Outliers</h3>
                <ul>
                <li>Outliers are any observation with a height below 140.5cm or over 182.5</li>
                <li>There were outliers for height at 96, 122, 124, 124, 127, 133, 135, 136, 137, 138, 140, 140, 140, 140, 140, 140, and 189</li>
                <li>The 6 observations with a height of 140 cm are just over the limit to qualify as an outlier using the interquartile range. </li>
                <li>All outliers were non-vegetarian students.  </li>
                <li>With the exception of one 13 year old and three 14 year olds, all of the lower outliers were 11 or 12 years old.  This may explain why these particular students were outliers, considering they were on the lower end of the included age range for the dataset.</li>
                </ul>
                <h2 id="bivariate-summaries">Bivariate Summaries</h2>
                <ul>
                <li>Mean height of vegetarian students: 156cm</li>
                <li>Mean height of non-vegetarian students: 158cm</li>
                <li>Non-vegetarian students had a much wider range for height and more outliers than vegetarian students</li>
                </ul>
                <img src="content/veg-height-boxplots.png" alt="side-by-side box plots comparing height distribution of vegetarian and non vegetarian children as described above">
                <pre><code><span class="hljs-comment"># height distribution for two groups</span>
                boxplot(data$Height_cm ~ data$Vegetarian, <span class="hljs-attr">main</span> = <span class="hljs-string">"Height of Vegetarian and Non-Vegetarian Female Students Ages 11-14"</span>,
                        <span class="hljs-attr">xlab=NULL,</span> <span class="hljs-attr">ylab</span> = <span class="hljs-string">"Height (cm)"</span>, <span class="hljs-attr">names=</span> c(<span class="hljs-string">"Non-Vegetarian"</span>, <span class="hljs-string">"Vegetarian"</span>))
                </code></pre><h2 id="inference-tests">Inference Tests</h2>
                <p>A two-sample mean test was performed with a significance level of 0.05. </p>
                <pre><code><span class="hljs-meta"># inference test</span>
                <span class="hljs-meta"># calculate sample statistics</span>
                <span class="hljs-title">n</span>&lt;- tapply(<span class="hljs-class"><span class="hljs-keyword">data</span>$<span class="hljs-type">Height_cm</span>, <span class="hljs-keyword">data</span>$<span class="hljs-type">Vegetarian</span>, <span class="hljs-type">FUN</span>=length)</span>
                <span class="hljs-title">n</span>.non&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"No"</span>,<span class="hljs-string">""</span>, n[<span class="hljs-number">1</span>]))
                <span class="hljs-title">n</span>.veg&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"Yes"</span>,<span class="hljs-string">""</span>, n[<span class="hljs-number">2</span>]))
                <span class="hljs-title">means</span>&lt;- tapply(<span class="hljs-class"><span class="hljs-keyword">data</span>$<span class="hljs-type">Height_cm</span>, <span class="hljs-keyword">data</span>$<span class="hljs-type">Vegetarian</span>, <span class="hljs-type">FUN</span>=mean)</span>
                <span class="hljs-title">xbar</span>.non&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"No"</span>,<span class="hljs-string">""</span>, means[<span class="hljs-number">1</span>]))
                <span class="hljs-title">xbar</span>.veg&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"Yes"</span>,<span class="hljs-string">""</span>, means[<span class="hljs-number">2</span>]))
                <span class="hljs-title">sd</span>&lt;- tapply(<span class="hljs-class"><span class="hljs-keyword">data</span>$<span class="hljs-type">Height_cm</span>, <span class="hljs-keyword">data</span>$<span class="hljs-type">Vegetarian</span>, <span class="hljs-type">FUN</span>=sd)</span>
                <span class="hljs-title">sd</span>.non&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"No"</span>,<span class="hljs-string">""</span>, sd[<span class="hljs-number">1</span>]))
                <span class="hljs-title">sd</span>.veg&lt;-<span class="hljs-keyword">as</span>.numeric(gsub(<span class="hljs-string">"Yes"</span>,<span class="hljs-string">""</span>, sd[<span class="hljs-number">2</span>]))
                <span class="hljs-meta"># calculate test statistic</span>
                <span class="hljs-title">se</span> &lt;- sqrt(sd.non^<span class="hljs-number">2</span>/n.non + sd.veg^<span class="hljs-number">2</span>/n.veg) # standard error
                <span class="hljs-title">se</span>
                <span class="hljs-title">t</span>.star &lt;- ((xbar.veg-xbar.non)<span class="hljs-number">-0</span>)/se
                <span class="hljs-title">t</span>.star
                <span class="hljs-meta"># calculate p value</span>
                <span class="hljs-title">min</span>(n.non<span class="hljs-number">-1</span>, n.veg<span class="hljs-number">-1</span>) # degrees <span class="hljs-keyword">of</span> freedom
                <span class="hljs-title">pval</span> &lt;- <span class="hljs-number">2</span>*pt(-abs(t.star), df = min(n.non<span class="hljs-number">-1</span>, n.veg<span class="hljs-number">-1</span>))
                <span class="hljs-title">pval</span>
                </code></pre><p>The test statistic was 0.71 for a difference in means of 2 and a standard error of 2.4803.  The resulting p value with 15 degrees of freedom was 0.4890, which was less than the significance level.</p>
                <p>We must fail to reject the null hypothesis.  There is insufficient evidence to conclude that vegetarian students have a different average height than non-vegetarian students, at least for female students between the ages of 11 and 14.</p>
                <p>The 95% confidence interval for the two-sample mean was suggests that the true difference between vegetarian and non-vegetarian students in our chosen demographic is between -3.5273cm and 7.0458cm.</p>
                <pre><code># confidence interval
                pe &lt;- xbar.veg - xbar.non
                crit.val &lt;- qt(<span class="hljs-number">1</span><span class="hljs-number">-0.05</span>/<span class="hljs-number">2</span>, df = min(n.non<span class="hljs-number">-1</span>, n.veg<span class="hljs-number">-1</span>))
                se &lt;- sqrt(sd.non^<span class="hljs-number">2</span>/n.non + sd.veg^<span class="hljs-number">2</span>/n.veg)
                margin &lt;- crit.val * se
                pe - margin # low end
                pe + margin # high end
                </code></pre><h2 id="findings-and-insights">Findings and Insights</h2>
                <p>The average height of vegetarian students sampled was 156cm compared to an average height of 158cm for non-vegetarians.  However, our inference tests indicate that there is not enough evidence to conclude that this difference holds for the population as a whole.</p>
                <p>The confidence interval containing both positive and negative values indicates that the average height of middle school female vegetarians could be either shorter, taller, or the same as their non-vegetarian classmates.</p>
                <p><strong>In conclusion, the data does not indicate that a vegetarian diet has an impact on a child&#39;s growth, at least for female children between the ages of 11 and 14.</strong></p>
                <h2 id="future-studies">Future Studies</h2>
                <p>There are two obvious shortcomings to this study.  Firstly, there were significantly fewer vegetarian students than non-vegetarian students in our dataset.  Secondly, our study did not look at how long each student had been a vegetarian.  A student that has been vegetarian for a decade is more likely to have their height affected by the diet than a student that has only been a vegetarian for a year.  Further studies could take into account how long the student has been vegetarian and used a matched pair system to avoid these shortcomings. </p>
            </div>
        </div>
      </div>
  </div>
</div>
</div>

<script src="script.js"></script>
</body>
</div>
</html>


<!-- project template
    <div class="card projects-card -project">
       <img src="" class="card-img-top" alt="">
       <div class="card-body">
            <div class="d-flex justify-content-between"><h3 class="card-title">title</h3><h4>tools</h4></div>
            <p class="card-text">summary</p>
            <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#-modal">
                Read more
            </button>
        </div>
    </div>

    <div class="modal fade modal-xl" id="-modal" tabindex="-1" aria-labelledby=" Project Writeup" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title" id="exampleModalLabel">title</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            </div>
            </div>
        </div>
    </div>
-->